<% content_for(:title) { "Избранное — FORMA" } %>

<div class="px-4 pt-8 pb-4">
  <h1 class="text-xl font-bold">Избранное</h1>
</div>

<% if @designs.any? %>
  <div class="grid grid-cols-2 gap-3 px-4">
    <% @designs.each do |design| %>
      <div>
        <a href="<%= design_path(design.slug || design.hashid) %>" class="block" data-turbo-action="advance">
          <div class="aspect-[3/4] rounded-xl overflow-hidden bg-forma-gray-100">
            <% variant = design.generations.last&.generation_variants&.where(status: "succeeded")&.first %>
            <% if variant&.preview_image&.attached? %>
              <%= image_tag variant.preview_thumb, class: "w-full h-full object-cover", loading: "lazy" %>
            <% else %>
              <div class="w-full h-full flex items-center justify-center text-forma-gray-300">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-10">
                  <path fill-rule="evenodd" d="M1.5 6a2.25 2.25 0 0 1 2.25-2.25h16.5A2.25 2.25 0 0 1 22.5 6v12a2.25 2.25 0 0 1-2.25 2.25H3.75A2.25 2.25 0 0 1 1.5 18V6ZM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0 0 21 18v-1.94l-2.69-2.689a1.5 1.5 0 0 0-2.12 0l-.88.879.97.97a.75.75 0 1 1-1.06 1.06l-5.16-5.159a1.5 1.5 0 0 0-2.12 0L3 16.061Zm10.125-7.81a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Z" clip-rule="evenodd" />
                </svg>
              </div>
            <% end %>
          </div>
          <p class="mt-2 text-sm font-medium truncate"><%= design.title %></p>
          <% if design.style %>
            <p class="text-xs text-forma-gray-500"><%= design.style.name %></p>
          <% end %>
        </a>
      </div>
    <% end %>
  </div>
<% else %>
  <div class="px-4 py-16 text-center">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="size-12 mx-auto text-forma-gray-300">
      <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" />
    </svg>
    <p class="mt-4 text-forma-gray-500">Сохраняй дизайны — соберём твою коллекцию</p>
    <%= link_to "Перейти в каталог", root_path, class: "mt-4 inline-block text-sm font-medium underline" %>
  </div>
<% end %>
